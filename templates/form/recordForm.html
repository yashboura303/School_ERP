{% extends "dashboard/base.html" %}
{% block title %}
Add Student Info
{% endblock %}
{% block content %}

{% include "message.html" %}


<style type="text/css" media="print">
    .no-print {
        display: none;
    }
</style>
<style>
/* Chrome, Safari, Edge, Opera */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;

}
.required::after {
 content: "*";
 color: red;
}

/* Firefox */
input[type=number] {
  -moz-appearance:textfield;
}
#display-none{
    display: none;
}
</style>

<form class="container" id="myForm" method="POST" action={% url 'recordForm' %} enctype="multipart/form-data">
    {% csrf_token %}
    <div>

        <hr>
        <h3 class="my-2 text-info ">Student Details</h3>
        <div class="form-row">
            <div class="form-group col-md-4">
                <label class="required">First Name:</label>
                <input type="text" class="form-control" id="firstname"  name="firstname" required>
            </div>
            <div class="form-group col-md-4">
                <label>Last Name:</label>
                <input type="text" class="form-control" id="lastname"  name="lastname">
            </div>
            <div class="form-group col-md-4">
                <label class="pr-1">Gender:</label>
                <select name="gender" class="form-control mr-2" id="exampleFormControlSelect2">
                    <option selected="true" value="">Select</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
        </div>
        <div class="form-row mt-2">
            <div class="form-group col-md-3">
                <label>DOB:</label>
                <input type="date" class="form-control" id="sDOB"  name="sDOB">
            </div>
            <div class="form-group col-md-3">
                <label>Class Section:</label>
                <input type="text" class="form-control" id="classsection" name="classsection">
            </div>
            <div class="form-group col-md-3">
                <label class="required">Admission Number:</label>
                <input type="number" class="form-control" id="addmissionnumber" name="addmissionnumber" onwheel="this.blur()" required>
            </div>
            <div class="form-group col-md-3">
                <label class="required">Phone Number:</label>
                <input min="0" type="text" maxlength="10" pattern="\d{10}" class="form-control" id="phone_number" name="phonenumber" onwheel="this.blur()" required>
            </div>
        </div>


    </div>
    <div class="form-row mt-2">
        <div class="form-group col-md-4">
            <label>Religion:</label>
            <input type="text" class="form-control" id="religion" name="religion">
        </div>
        <div class="form-group col-md-4">
            <label for="caste">Caste:</label>
            <input type="text" class="form-control" id="caste" name="caste">
        </div>
    </div>
    <div class="form-row mt-2">
        <div class="form-group col-md-6"> <label for="inputAddress">Current Address:</label>
            <input type="text" class="form-control" id="inputAddress" name="currentinputAddress" placeholder=""></div>
        <div class="form-group col-md-6">
            <label for="inputAddress2">Current Address 2:</label>
            <input type="text" class="form-control" id="inputAddress2" name="currentinputAddress2" placeholder="">
        </div>
    </div>

    <div class="form-row mt-2 ">
        <div class="form-group col-md-6">
            <label for="inputCity">City:</label>
            <input type="text" class="form-control" id="inputCity" name="inputCity">
        </div>
        <div class="form-group col-md-4">
            <label for="inputState">State:</label>
            <input type="text" class="form-control" id="inputState" name="inputState">
        </div>
        <div class="form-group col-md-2">
            <label for="inputZip">Pin Code:</label>
            <input type="text" class="form-control" id="inputZip" name="inputZip">
        </div>
    </div>


    <div class="custom-control custom-checkbox my-2">
        <input type="checkbox" class="custom-control-input" name="customCheck1" id="customCheck1"
            onclick="FillAddress(this.form)">
        <label class="custom-control-label font-italic font-weight-lighter" for="customCheck1"> Current Address is same
            as Permanent Address:</label>
    </div>

    <div class="form-row mt-2 ">
        <div class="form-group col-md-6"> <label for="preminputAddress">Permanent Address:</label>
            <input type="text" class="form-control" id="perminputAddress" name="perminputAddress" placeholder=""></div>
        <div class="form-group col-md-6">
            <label for="preminputAddress2">Permanent Address 2:</label>
            <input type="text" class="form-control" id="perminputAddress2" name="perminputAddress2" placeholder="">
        </div>
    </div>

    <div class="form-row mt-2">
        <div class="form-group col-md-6">
            <label for="inputCity">City:</label>
            <input type="text" class="form-control" id="perminputCity" name="perminputCity">
        </div>
        <div class="form-group col-md-4">
            <label for="inputState">State:</label>
            <input type="text" class="form-control" id="perminputState" name="perminputState">
        </div>
        <div class="form-group col-md-2">
            <label for="inputZip">Pin Code:</label>
            <input type="text" class="form-control" id="perminputZip" name="perminputZip">
        </div>
    </div>
    <div class="form-row mt-2">
        <div class="form-group col-md-4">
            <label for="tcnumber">Transfer Certificate Number:</label>
            <input type="number" class="form-control" id="tcnumber" name="tcnumber">
        </div>
        <div class="form-group col-md-4">
            <label for="anumber">Aadhar Number:</label>
            <input type="number" class="form-control" id="anumber" name="anumber">
        </div>
    </div>
    <div class="form-row mt-2">
        <div class="form-group col-md-4">
            <label for="feeCategory">Fee Waiver Category:</label>
            <input type="text" class="form-control" id="feeCategory" name="feeCategory">
        </div>
        <div class="form-group col-md-4">
            <label for="prevschoolname">Previous School Name:</label>
            <input type="text" class="form-control" id="prevschoolname" name="prevschoolname">
        </div>
        <div class="form-group col" id="sibling-div">
            <label for="siblingid">Sibling ID:</label>
            <button type="button" onclick="addSibling()" class="btn btn-outline-secondary btn-sm">Add Sibling</button>
                    <button type="button" onclick="delSibling()" class="btn btn-outline-danger btn-sm" id="display-none">Delete Sibiling</button>
            <input type="number" class="form-control" id="siblingid" min="0" name="siblingid">
        </div>
        
    </div>

    <div class="form-row mt-2">
        <div class="form-group col-md-3">
            <label class="pr-1" >Route Code:</label>
            <select name="route_code" class="form-control mr-2">
                <option selected="true" disabled="disabled" value="a">Select</option>
                {% for route in routes %}
                <option value='{{ route.stoppage_id }}'>{{ route.route_code }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group col-md-4">
            <label for="">Stoppage Name:</label>
            <input type="text" class="form-control" name="stoppage_name">
        </div>
        <div class="form-group col-md-4">
            <label class="pr-1" for="">Shift:</label>
            <select name="shift" class="form-control mr-2" id="">
                <option selected="true" value="">Select</option>
                <option value="Morning">Morning</option>
                <option value="Afternoon">Afternoon</option>
            </select>
        </div>
    </div>
















    <h3 class="my-4 text-info border-top border-dark pt-4">Parent/Gaurdian Details </h3>
    <div class="form-row mt-2">
        <div class="form-group col-md-3">
            <label for="fathername">Father/Gaurdian Name:</label>
            <input type="text" class="form-control" id="fathername"  name="fathername">
        </div>
        <div class="form-group col-md-3">
            <label for="mothername">Mother Name:</label>
            <input type="text" class="form-control" id="mothername"  name="mothername">
        </div>
        <div class="form-group col-md-3">
            <label>Father DOB:</label>
            <input type="date" class="form-control" id="fDOB"  name="fDOB">
        </div>
        <div class="form-group col-md-3">
            <label>Mother DOB:</label>
            <input type="date" class="form-control" id="mDOB"  name="mDOB">
        </div>
    </div>
    <div class="form-row mt-3">
        <div class="form-group col-md-3">
            <label>Phone Number:</label>
            <input min="0" type="text" class="form-control"  maxlength="10" pattern="\d{10}" id="phone_number" name="phone_number">
        </div>
        <div class="form-group col-md-3">
            <label>Alternate Phone Number:</label>
            <input min="0" type="text" class="form-control"  maxlength="10" pattern="\d{10}" id="alt_phone_number" name="alt_phone_number">
        </div>
        <div class="form-group col-md-3">
            <label for="prevschoolname">E-Mail:</label>
            <input type="email" class="form-control" aria-describedby="emailHelp" id="pemail" name="pemail">
        </div>
    </div>
    <div class="form-row mt-3">
        <div class="form-group col-md-4">
            <label for="mothername">Father/Guardian Qualification:</label>
            <input type="text" class="form-control" id="g_qual"  name="g_qual">
        </div>
        <div class="form-group col-md-4">
            <label for="mothername">Fahter/Guardian Occuptation:</label>
            <input type="text" class="form-control" id="g_occup"  name="g_occup">
        </div>
    </div>
    <div class="form-row mt-3">
        <div class="form-group col-md-5">
            <label for="mothername">Mother Qualification:</label>
            <input type="text" class="form-control" id="m_qual"  name="m_qual">
        </div>
        <div class="form-group mb-5 col-md-5">
            <label for="mothername">Mother Occuptation:</label>
            <input type="text" class="form-control" id="m_occup"  name="m_occup">
        </div>
    </div>




    <h3 class="my-4 text-info border-top border-dark pt-4">Documents</h3>

    <div class="form-row">
        <div class="form-group col-md-4">
            <label for="photgraph">Photograph:</label>
            <input onchange="ValidateSize(this)" type="file" class="form-control-file no-print " id="photgraph"
                name="photgraph">
        </div>
        <div class="form-group col-md-4">
            <label for="idproof">ID Proof:</label>
            <input onchange="ValidateSize(this)" type="file" class="form-control-file no-print " id="idproof"
                name="idproof">
        </div>
        <div class="form-group col-md-4">
            <label for="castcert">Caste Certificate:</label>
            <input onchange="ValidateSize(this)" type="file" class="form-control-file no-print " id="castcert"
                name="castcert">
        </div>
    </div>

    <div class="form-row mt-2">
        <div class="form-group col-md-4">
            <label for="domicile">Domicile:</label>
            <input onchange="ValidateSize(this)" type="file" class="form-control-file no-print " id="domicile"
                name="domicile">
        </div>
        <div class="form-group col-md-4">
            <label onchange="ValidateSize(this)" for="tc">T.C:</label>
            <input type="file" class="form-control-file" id="tc" name="tc">
        </div>
        <div class="form-group col-md-4">
            <label for="charcert">Character Certificate:</label>
            <input onchange="ValidateSize(this)" type="file" class="form-control-file no-print " id="charcert"
                name="charcert">
        </div>
    </div>

    <div class="row justify-content-around">
        <button type="submit" class="col-4 mt-5  container btn btn-primary">Submit</button>
        <a href="{% url 'searchPage' %}" class="btn btn-primary col-4 mt-5"> Print </a>
    </div>

</form>
<script>
    let count = 0;
    addSibling = () => {
        div = document.getElementById("sibling-div");
        btn = document.getElementById("display-none");
        btn.style.display = "inline-block";
        input = document.createElement("input");
        input.type = "text";
        input.name = `siblingid${count}`;
        input.id = `siblingid${count}`;
        input.className = `form-control my-2`;
        div.appendChild(input);
        count+=1;
 }
 delSibling = () =>{
    if (count > 0){
        input = document.getElementById(`siblingid${count-1}`);
        input.outerHTML = "";
        count-=1;
        if (count===0){
            btn = document.getElementById("display-none");
        btn.style.display = "none"
        }
    }
    else{
        btn = document.getElementById("display-none");
        btn.style.display = "none"
    }
 }
    function FillAddress(f) {
        console.log(999)
        if (f.customCheck1.checked == true) {
            f.perminputAddress.value = f.currentinputAddress.value;
            f.perminputAddress2.value = f.currentinputAddress2.value;
            f.perminputCity.value = f.inputCity.value
            f.perminputState.value = f.inputState.value
            f.perminputZip.value = f.inputZip.value
        }
    }

    function ValidateSize(file) {
        var FileSize = file.files[0].size / 1024 / 1024; // in MB
        if (FileSize > 2) {
            alert('File size exceeds 2 MB !');
        } else {

        }
    }


</script>


</script>


{% endblock %}