<!doctype html>
{% load static %}
<html lang="en">

<head>
    <title>Marks</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    {% include 'message.html' %}
    <div class="container-fluid row justify-content-around mt-3">
        <div class="col-md-5">
            <h3>Add Exam</h3>
            <hr>
            <form action="" id="add_exam_form">
                {% csrf_token %}
                <div class="form-group">
                    <label for="">Exam Type</label>
                    <input type="text" class="form-control" name="" id="exam_type" aria-describedby="helpId" placeholder="">
                </div>
                <div class="form-group">
                    <label for="">Total Marks</label>
                    <input type="number" class="form-control" name="" id="total_marks" aria-describedby="helpId" placeholder="">
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
        <div class="col-md-5">
            <h3>Add Subject to Class</h3>
            <hr>
            <form action="" id="add_subject_form">
                {% csrf_token %}
               <!--  <div class="form-group">
                    <label for="">Class Room</label>
                    <input type="text" class="form-control" name="" id="class_room" aria-describedby="helpId" placeholder="">
                </div> -->
                <div class="form-group">
                    <label class="pr-1" for="">Class Room:</label>
                    <select name="class_room" class="form-control mr-2" id="class_room">
                        <option selected="true" disabled="disabled" value="a">Select</option>
                        {% for class_room in class_rooms %}
                        <option value='{{ class_room.classSection }}'>{{ class_room.classSection }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="">Subject</label>
                    <input type="text" class="form-control" name="" id="class_subject" aria-describedby="helpId" placeholder="">
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
    </div>
    <div class="container m-5 text-center">
        <a href="{% url 'addMarks' %}" class=" btn btn-info p-3 m-4">Go to Add Marks Section</a>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="{% static 'marks/js/add_exam_form.js' %}"></script>
    <script>
    $(document).on('submit', '#add_exam_form', function(e) {

        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '{% url 'addExamForm' %}',
            data: {
                exam_type: $('#exam_type').val(),
                total_marks: $('#total_marks').val(),
                csrfmiddlewaretoken: '{{ csrf_token }}'

            },
            success: function(e) {
                alert("Exam added!");
            },
            error: function() {
                alert("Fail");
            }

        });
    });
    $(document).on('submit', '#add_subject_form', function(e) {

        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '{% url 'addSubjectForm' %}',
            data: {
                class_room: $('#class_room').val(),
                class_subject: $('#class_subject').val(),
                csrfmiddlewaretoken: '{{ csrf_token }}'

            },
            success: function(e) {
                alert("Subject added!");
            },
            error: function() {
                alert("Fail");
            }

        });
    });
    </script>
</body>

</html>